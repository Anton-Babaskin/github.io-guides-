<!DOCTYPE html>
<html lang="{{ page.lang | default: site.lang | default: 'ru' }}">
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  
  <!-- SEO Meta Tags -->
  <title>{% if page.title %}{{ page.title | escape }} - {{ site.title | escape }}{% else %}{{ site.title | escape }}{% endif %}</title>
  <meta name="description" content="{{ page.description | default: page.excerpt | default: site.description | strip_html | normalize_whitespace | truncate: 160 | escape }}">
  <meta name="author" content="{{ site.author.name }}">
  
  <!-- Open Graph Meta Tags -->
  <meta property="og:title" content="{% if page.title %}{{ page.title | escape }} - {{ site.title | escape }}{% else %}{{ site.title | escape }}{% endif %}">
  <meta property="og:description" content="{{ page.description | default: page.excerpt | default: site.description | strip_html | normalize_whitespace | truncate: 160 | escape }}">
  <meta property="og:type" content="{% if page.layout == 'post' %}article{% else %}website{% endif %}">
  <meta property="og:url" content="{{ page.url | absolute_url }}">
  <meta property="og:site_name" content="{{ site.title }}">
  <meta property="og:locale" content="ru_RU">
  
  <!-- Twitter Card Meta Tags -->
  <meta name="twitter:card" content="summary">
  <meta name="twitter:title" content="{% if page.title %}{{ page.title | escape }} - {{ site.title | escape }}{% else %}{{ site.title | escape }}{% endif %}">
  <meta name="twitter:description" content="{{ page.description | default: page.excerpt | default: site.description | strip_html | normalize_whitespace | truncate: 160 | escape }}">
  
  <!-- Favicon -->
  <link rel="icon" type="image/x-icon" href="{{ '/assets/favicon.ico' | relative_url }}">
  
  <!-- Stylesheets -->
  <link rel="stylesheet" href="{{ '/assets/css/style.css' | relative_url }}">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
  <link rel="canonical" href="{{ page.url | replace:'index.html','' | absolute_url }}">
  
  <!-- Fonts -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
  
  <!-- Jekyll SEO Tag -->
  {% seo %}
</head>

<body>
  <header class="site-header">
    <div class="container">
      <nav class="site-nav">
        <div class="nav-brand">
          <a href="{{ '/' | relative_url }}" class="brand-link">
            <i class="fas fa-terminal brand-icon"></i>
            <span class="brand-text">{{ site.title }}</span>
          </a>
        </div>
        
        <div class="nav-menu" id="nav-menu">
          <a href="{{ '/' | relative_url }}" class="nav-link {% if page.url == '/' %}active{% endif %}">
            <i class="fas fa-home"></i> Главная
          </a>
          <a href="{{ '/articles/' | relative_url }}" class="nav-link {% if page.url contains '/articles/' %}active{% endif %}">
            <i class="fas fa-book"></i> Статьи
          </a>
          <a href="{{ '/about/' | relative_url }}" class="nav-link {% if page.url == '/about/' %}active{% endif %}">
            <i class="fas fa-user"></i> О проекте
          </a>
          <a href="https://github.com/Anton-Babaskin/guides" class="nav-link external" target="_blank">
            <i class="fab fa-github"></i> GitHub
          </a>
        </div>
        
        <div class="nav-toggle" id="nav-toggle">
          <span></span>
          <span></span>
          <span></span>
        </div>
      </nav>
    </div>
  </header>

  <main class="site-main">
    <div class="container">
      {{ content }}
    </div>
  </main>

  <footer class="site-footer">
    <div class="container">
      <div class="footer-content">
        <div class="footer-section">
          <h4>SysAdmin Guides</h4>
          <p>Практические руководства по Linux системному администрированию</p>
        </div>
        
        <div class="footer-section">
          <h4>Категории</h4>
          <ul class="footer-links">
            <li><a href="#"><i class="fas fa-envelope"></i> Почтовые серверы</a></li>
            <li><a href="#"><i class="fas fa-shield-alt"></i> Безопасность</a></li>
            <li><a href="#"><i class="fas fa-chart-line"></i> Мониторинг</a></li>
            <li><a href="#"><i class="fas fa-server"></i> Web-серверы</a></li>
          </ul>
        </div>
        
        <div class="footer-section">
          <h4>Контакты</h4>
          <div class="social-links">
            {% for social in site.social %}
            <a href="{{ social.url }}" class="social-link" target="_blank" title="{{ social.name }}">
              <i class="{{ social.icon }}"></i>
            </a>
            {% endfor %}
          </div>
          <p class="contact-info">
            <i class="fas fa-map-marker-alt"></i> {{ site.author.location }}<br>
            <i class="fas fa-code"></i> {{ site.author.bio }}
          </p>
        </div>
      </div>
      
      <div class="footer-bottom">
        <div class="copyright">
          <p>&copy; {{ 'now' | date: "%Y" }} {{ site.author.name }}. Все права защищены.</p>
        </div>
        <div class="footer-meta">
          <p>Сделано с ❤️ для сообщества системных администраторов</p>
        </div>
      </div>
    </div>
  </footer>

  <!-- JavaScript -->
  <script>
    // Mobile menu toggle
    document.getElementById('nav-toggle').addEventListener('click', function() {
      document.getElementById('nav-menu').classList.toggle('active');
      this.classList.toggle('active');
    });

    // Smooth scrolling for anchor links
    document.querySelectorAll('a[href^="#"]').forEach(anchor => {
      anchor.addEventListener('click', function (e) {
        e.preventDefault();
        const target = document.querySelector(this.getAttribute('href'));
        if (target) {
          target.scrollIntoView({
            behavior: 'smooth',
            block: 'start'
          });
        }
      });
    });

    // Add reading time to articles
    function addReadingTime() {
      const content = document.querySelector('.post-content, .article-content');
      if (content) {
        const wordCount = content.innerText.split(/\s+/).length;
        const readingTime = Math.ceil(wordCount / 200); // 200 words per minute
        const readingTimeElement = document.querySelector('.reading-time');
        if (readingTimeElement) {
          readingTimeElement.textContent = `⏱️ ${readingTime} мин чтения`;
        }
      }
    }

    // Initialize on page load
    document.addEventListener('DOMContentLoaded', function() {
      addReadingTime();
    });
  </script>

  <!-- Google Analytics -->
  {% if site.google_analytics %}
  <script async src="https://www.googletagmanager.com/gtag/js?id={{ site.google_analytics }}"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());
    gtag('config', '{{ site.google_analytics }}');
  </script>
  {% endif %}
</body>
</html>
